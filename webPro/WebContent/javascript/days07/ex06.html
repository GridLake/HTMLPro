<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2019. 4. 15. 오전 11:22:17</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="">
<style>

</style>
</head>
<body>
<!--  
https://hyunseob.github.io/2016/08/30/javascript-closure/
-->
<p id="demo"></p>
<script>
 /* 
 var i;
 for (i = 0; i < 10; i++) {
	 setTimeout(function() { // setTimeout()
		// console.log(i);
	 // $("#demo").html($("#demo").html() + i);
	 }, 1000);
 }
  */
 var i;
 for (i = 0; i < 10; i++) {
	 
	 (function(j) {
		 setTimeout(function() { // 클로저
			 console.log(j);
			 }, 1000);
	  })(i);
 }
 
</script>

<script>
 function hello(name) {
	  var _name = name; // 지역변수 _name 선언
	  
	  return function() {
	    console.log('Hello, ' + _name);
	  };
	}

	var hello1 = hello('승민');
	var hello2 = hello('현섭');
	var hello3 = hello('유근');

	// hello1();
	// hello2();
	// hello3();
</script>

<script>
 function Hello(name) {
	 this._name = name;
 }

 // say 메소드 추가하는 코딩(Using 'prototype')
 Hello.prototype.say = function() {
	 console.log('Hello, ' + this._name);
 }
 
 var hello1 = new Hello('승민');
 var hello2 = new Hello('현섭');
 var hello3 = new Hello('유근');
 
 // hello1.say();
 // hello2.say();
 // hello3.say();
 
 hello1._name = 'anonymous';
 // hello1["_name"] = 'anonymous';
 // hello1.say();
 
 // 클로저를 사용하여 외부에서 변수에 직접 접근하는 것을 제한할 수 있다
</script>

<script>
 var base = 'Hello, ';
 
 function sayHelloTo(name) {
	 var text = base + name; // 전역변수 + 지역변수
	 return function() {
		 console.log(text);
		 };
 }
 
 /* 
 var hello1 = sayHelloTo('승민');
 var hello2 = sayHelloTo('현섭');
 var hello3 = sayHelloTo('유근');
 
 hello1();
 hello2();
 hello3(); 
 */
</script>

<script>
 function getClosure() {
	  var text = 'variable 1';
	  
	  return function() {
	    return text;
	  }; // 반환된 함수 == 클로저
 }
 
 var closure = getClosure();
 // console.log(closure); // 함수 정의
 // console.log(closure());
 // console.log(getClosure()());
 
/* JavaScript 클로저(Closure)
 1. 클로저는 독립적인 (자유) 변수를 가리키는 함수이다.
 2. 또는, 클로저 안에 정의된 함수는 만들어진 환경을 '기억한다'.
 3. 함수 내에 함수를 정의하고 사용하는 것이다
 */
</script>
</body>
</html>